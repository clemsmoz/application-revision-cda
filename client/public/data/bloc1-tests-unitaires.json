{
  "id": "bloc1-tests-unitaires",
  "bloc": "bloc1",
  "title": "Tests Unitaires",
  "icon": "üß™",
  "color": "#10B981",
  "description": "Les tests unitaires permettent de v√©rifier le bon fonctionnement des composants individuels d'une application. Ils garantissent la qualit√© du code et facilitent la maintenance.",
  "sections": [
    {
      "id": "intro",
      "title": "Introduction aux Tests Unitaires",
      "content": [
        {
          "type": "definition",
          "term": "Test Unitaire",
          "definition": "Test automatis√© qui v√©rifie le bon fonctionnement d'une unit√© de code isol√©e (fonction, m√©thode, classe)."
        },
        {
          "type": "paragraph",
          "text": "Les tests unitaires font partie de la **pyramide des tests** : Tests Unitaires (base) ‚Üí Tests d'Int√©gration ‚Üí Tests E2E (sommet)."
        },
        {
          "type": "table",
          "headers": [
            "Avantage",
            "Description"
          ],
          "rows": [
            [
              "D√©tection pr√©coce des bugs",
              "Les erreurs sont trouv√©es rapidement"
            ],
            [
              "Documentation vivante",
              "Les tests documentent le comportement attendu"
            ],
            [
              "Refactoring s√©curis√©",
              "Modifier le code sans crainte de tout casser"
            ],
            [
              "Qualit√© du code",
              "Force √† √©crire du code testable et modulaire"
            ]
          ]
        }
      ]
    },
    {
      "id": "frameworks",
      "title": "Frameworks de Tests",
      "content": [
        {
          "type": "table",
          "headers": [
            "Langage",
            "Framework",
            "Description"
          ],
          "rows": [
            [
              "JavaScript",
              "Jest",
              "Framework complet (React, Node.js)"
            ],
            [
              "JavaScript",
              "Mocha + Chai",
              "Flexible et modulaire"
            ],
            [
              "JavaScript",
              "Vitest",
              "Rapide, compatible Vite"
            ],
            [
              "PHP",
              "PHPUnit",
              "Standard pour PHP"
            ],
            [
              "Python",
              "pytest",
              "Simple et puissant"
            ],
            [
              "Java",
              "JUnit",
              "Standard pour Java"
            ]
          ]
        }
      ]
    },
    {
      "id": "structure",
      "title": "Structure d'un Test",
      "content": [
        {
          "type": "paragraph",
          "text": "Un test suit g√©n√©ralement le pattern **AAA** : Arrange (pr√©parer), Act (agir), Assert (v√©rifier)."
        },
        {
          "type": "code",
          "language": "javascript",
          "code": "// Exemple avec Jest\nfunction add(a, b) {\n  return a + b;\n}\n\ntest('add() doit add deux nombres', () => {\n  // Arrange (pr√©parer)\n  const a = 2;\n  const b = 3;\n\n  // Act (agir)\n  const result = add(a, b);\n\n  // Assert (v√©rifier)\n  expect(result).toBe(5);\n});"
        }
      ]
    },
    {
      "id": "assertions",
      "title": "Assertions Courantes",
      "content": [
        {
          "type": "table",
          "headers": [
            "Assertion (Jest)",
            "Description"
          ],
          "rows": [
            [
              "expect(x).toBe(y)",
              "√âgalit√© stricte (===)"
            ],
            [
              "expect(x).toEqual(y)",
              "√âgalit√© profonde (objets, tableaux)"
            ],
            [
              "expect(x).toBeTruthy()",
              "Valeur truthy"
            ],
            [
              "expect(x).toBeFalsy()",
              "Valeur falsy"
            ],
            [
              "expect(x).toBeNull()",
              "Valeur null"
            ],
            [
              "expect(x).toBeUndefined()",
              "Valeur undefined"
            ],
            [
              "expect(arr).toContain(item)",
              "Tableau contient un √©l√©ment"
            ],
            [
              "expect(fn).toThrow()",
              "Fonction lance une exception"
            ]
          ]
        }
      ]
    },
    {
      "id": "mocks",
      "title": "Mocks et Stubs",
      "content": [
        {
          "type": "definition",
          "term": "Mock",
          "definition": "Objet simul√© qui remplace une d√©pendance externe (API, base de donn√©es) pour isoler le code test√©."
        },
        {
          "type": "code",
          "language": "javascript",
          "code": "// Mock d'une fonction\nconst fetchUser = jest.fn();\nfetchUser.mockResolvedValue({ id: 1, name: 'Alice' });\n\n// Test\ntest('getUserName() retourne le name', async () => {\n  const name = await getUserName(1);\n  expect(name).toBe('Alice');\n  expect(fetchUser).toHaveBeenCalledWith(1);\n});"
        }
      ]
    },
    {
      "id": "tdd",
      "title": "TDD (Test-Driven Development)",
      "content": [
        {
          "type": "paragraph",
          "text": "Le **TDD** est une m√©thodologie o√π les tests sont √©crits **avant** le code de production."
        },
        {
          "type": "list",
          "items": [
            "**Red** : √âcrire un test qui √©choue",
            "**Green** : √âcrire le code minimal pour faire passer le test",
            "**Refactor** : Am√©liorer le code tout en gardant les tests verts"
          ]
        }
      ]
    }
  ],
  "keyPoints": [
    "Les tests unitaires v√©rifient le bon fonctionnement d'une unit√© de code isol√©e.",
    "Pattern AAA : Arrange (pr√©parer), Act (agir), Assert (v√©rifier).",
    "Frameworks : Jest (JS), PHPUnit (PHP), pytest (Python).",
    "Mocks : objets simul√©s pour isoler le code test√©.",
    "TDD : √©crire les tests avant le code (Red, Green, Refactor)."
  ],
  "resources": [
    {
      "type": "doc",
      "title": "Jest Documentation",
      "url": "https://jestjs.io/"
    },
    {
      "type": "doc",
      "title": "PHPUnit Documentation",
      "url": "https://phpunit.de/"
    }
  ]
}