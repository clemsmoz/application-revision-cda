{
  "id": "bloc1-git",
  "bloc": "bloc1",
  "title": "Gestion du Code avec Git",
  "icon": "üîÄ",
  "color": "#F97316",
  "description": "Git est LE gestionnaire de code source utilis√© par des millions de d√©veloppeurs. Il permet de g√©rer l'historique des modifications, de travailler en √©quipe et de g√©rer des projets de toutes tailles.",
  "sections": [
    {
      "id": "intro",
      "title": "Introduction √† Git",
      "content": [
        {
          "type": "paragraph",
          "text": "**Git** s'est impos√© comme le gestionnaire de code source standard dans l'industrie. Il est **performant**, permet de g√©rer de **gros projets** et offre la possibilit√© de **travailler localement** sans connexion r√©seau."
        },
        {
          "type": "definition",
          "term": "Git",
          "definition": "Syst√®me de contr√¥le de version distribu√© (DVCS) cr√©√© par Linus Torvalds en 2005, permettant de suivre l'historique des modifications d'un projet et de collaborer efficacement en √©quipe."
        },
        {
          "type": "alert",
          "level": "info",
          "text": "Git est d√©velopp√© selon un **mod√®le open source**. Tout son code est accessible et des sponsors garantissent sa p√©rennit√©."
        }
      ]
    },
    {
      "id": "installation-config",
      "title": "Installation et Configuration",
      "content": [
        {
          "type": "paragraph",
          "text": "Git s'installe √† partir du site officiel **git-scm.com**. Les commandes suivent une syntaxe standard :"
        },
        {
          "type": "code",
          "language": "bash",
          "code": "git [commande] [param√®tre(s)] [--option] [-o]"
        },
        {
          "type": "subtitle",
          "text": "Configuration Initiale"
        },
        {
          "type": "paragraph",
          "text": "La commande `git config` permet de g√©rer la configuration √† **trois niveaux** : syst√®me, global (utilisateur) et local (projet)."
        },
        {
          "type": "code",
          "language": "bash",
          "code": "# Configuration de l'identit√© (obligatoire)\ngit config --global user.name \"Votre Nom\"\ngit config --global user.email \"votre@email.com\"\n\n# V√©rifier la configuration\ngit config --list"
        },
        {
          "type": "subtitle",
          "text": "Alias (Raccourcis)"
        },
        {
          "type": "paragraph",
          "text": "Les **alias** permettent de simplifier les commandes fr√©quemment utilis√©es."
        },
        {
          "type": "code",
          "language": "bash",
          "code": "# Cr√©er des alias utiles\ngit config --global alias.st status\ngit config --global alias.co checkout\ngit config --global alias.br branch\ngit config --global alias.lg \"log --all --graph --oneline\""
        }
      ]
    },
    {
      "id": "depot-commits",
      "title": "D√©p√¥t et Commits",
      "content": [
        {
          "type": "paragraph",
          "text": "L'historique d'un d√©p√¥t Git est stock√© dans un dossier cach√© `.git` √† la racine du projet."
        },
        {
          "type": "table",
          "headers": ["Commande", "R√¥le", "Exemple"],
          "rows": [
            ["git init", "Initialise un nouveau d√©p√¥t Git local", "git init mon-projet"],
            ["git add <fichier>", "Ajoute un fichier √† la zone de staging (pr√©paration du commit)", "git add index.html"],
            ["git add .", "Ajoute tous les fichiers modifi√©s au staging", "git add ."],
            ["git commit -m \"message\"", "Enregistre les modifications du staging dans l'historique", "git commit -m \"Ajout page d'accueil\""],
            ["git status", "Affiche l'√©tat des fichiers (modifi√©s, stag√©s, non suivis)", "git status"]
          ]
        },
        {
          "type": "subtitle",
          "text": "Cycle de Vie d'un Fichier"
        },
        {
          "type": "code",
          "language": "text",
          "code": "Untracked ‚Üí (git add) ‚Üí Staged ‚Üí (git commit) ‚Üí Committed\n    ‚Üë                                                  ‚Üì\n    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (modification) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò"
        },
        {
          "type": "alert",
          "level": "info",
          "text": "**Bonne pratique** : Faire des commits **atomiques** (une fonctionnalit√© = un commit) avec des messages **clairs et descriptifs**."
        }
      ]
    },
    {
      "id": "historique",
      "title": "Historique et Navigation",
      "content": [
        {
          "type": "paragraph",
          "text": "Git conserve **tout l'historique** des modifications. On peut toujours revenir en arri√®re."
        },
        {
          "type": "table",
          "headers": ["Commande", "R√¥le", "Exemple"],
          "rows": [
            ["git log", "Affiche l'historique des commits", "git log"],
            ["git log --oneline", "Affiche l'historique de mani√®re condens√©e", "git log --oneline"],
            ["git log --all --graph", "Affiche l'historique graphique de toutes les branches", "git log --all --graph --oneline"],
            ["git show <commit>", "Affiche les d√©tails d'un commit sp√©cifique", "git show abc123"],
            ["git diff", "Compare les modifications non stag√©es", "git diff"],
            ["git diff --staged", "Compare les modifications stag√©es", "git diff --staged"]
          ]
        },
        {
          "type": "subtitle",
          "text": "Notation HEAD"
        },
        {
          "type": "paragraph",
          "text": "**HEAD** d√©signe le commit actuel. On peut r√©f√©rencer les commits pr√©c√©dents avec `HEAD~n` (n commits en arri√®re)."
        },
        {
          "type": "code",
          "language": "bash",
          "code": "HEAD      # Commit actuel\nHEAD~1    # Commit pr√©c√©dent\nHEAD~2    # 2 commits en arri√®re\nHEAD~n    # n commits en arri√®re"
        }
      ]
    },
    {
      "id": "annulation",
      "title": "Annulation et Retour en Arri√®re",
      "content": [
        {
          "type": "paragraph",
          "text": "Git permet de **corriger les erreurs** et de revenir en arri√®re de plusieurs mani√®res."
        },
        {
          "type": "table",
          "headers": ["Commande", "Effet", "Quand l'utiliser"],
          "rows": [
            ["git reset HEAD~n", "Supprime les n derniers commits (garde les modifications)", "Pour refaire des commits mal formul√©s"],
            ["git reset --hard HEAD~n", "Supprime les n derniers commits ET les modifications", "‚ö†Ô∏è Dangereux : perte d√©finitive des modifications"],
            ["git revert <commit>", "Cr√©e un nouveau commit qui annule les modifications d'un commit", "Pour annuler un commit d√©j√† publi√©"],
            ["git clean -fd", "Supprime les fichiers non suivis (untracked)", "Pour nettoyer le r√©pertoire de travail"]
          ]
        },
        {
          "type": "alert",
          "level": "danger",
          "text": "**Attention** : `git reset --hard` supprime d√©finitivement les modifications. √Ä utiliser avec pr√©caution !"
        }
      ]
    },
    {
      "id": "branches",
      "title": "Branches et Workflow",
      "content": [
        {
          "type": "paragraph",
          "text": "Les **branches** permettent de travailler sur des d√©veloppements diff√©rents en parall√®le sans impacter la branche principale."
        },
        {
          "type": "table",
          "headers": ["Commande", "R√¥le", "Exemple"],
          "rows": [
            ["git branch", "Liste les branches locales", "git branch"],
            ["git branch <nom>", "Cr√©e une nouvelle branche", "git branch feature-login"],
            ["git checkout <branche>", "Change de branche", "git checkout feature-login"],
            ["git checkout -b <nom>", "Cr√©e et bascule sur une nouvelle branche", "git checkout -b feature-login"],
            ["git branch -d <nom>", "Supprime une branche (si fusionn√©e)", "git branch -d feature-login"],
            ["git branch -D <nom>", "Force la suppression d'une branche", "git branch -D feature-login"]
          ]
        },
        {
          "type": "subtitle",
          "text": "Workflow Git Flow (Simplifi√©)"
        },
        {
          "type": "code",
          "language": "text",
          "code": "main (production)\n  ‚Üë\n  ‚îî‚îÄ‚îÄ develop (d√©veloppement)\n        ‚Üë\n        ‚îú‚îÄ‚îÄ feature/login\n        ‚îú‚îÄ‚îÄ feature/dashboard\n        ‚îî‚îÄ‚îÄ bugfix/header"
        }
      ]
    },
    {
      "id": "merge-rebase",
      "title": "Fusion : Merge et Rebase",
      "content": [
        {
          "type": "paragraph",
          "text": "Pour int√©grer les modifications d'une branche dans une autre, on utilise **merge** ou **rebase**."
        },
        {
          "type": "subtitle",
          "text": "Merge (Fusion)"
        },
        {
          "type": "paragraph",
          "text": "Le **merge** fusionne deux branches en cr√©ant un commit de fusion."
        },
        {
          "type": "code",
          "language": "bash",
          "code": "# Fusionner la branche feature dans main\ngit checkout main\ngit merge feature-login"
        },
        {
          "type": "alert",
          "level": "warning",
          "text": "Le merge peut g√©n√©rer des **conflits** si les m√™mes lignes ont √©t√© modifi√©es dans les deux branches."
        },
        {
          "type": "subtitle",
          "text": "Rebase (R√©application)"
        },
        {
          "type": "paragraph",
          "text": "Le **rebase** r√©√©crit l'historique en r√©appliquant les commits d'une branche sur une autre, cr√©ant un historique **lin√©aire**."
        },
        {
          "type": "code",
          "language": "bash",
          "code": "# Rebaser feature sur main\ngit checkout feature-login\ngit rebase main"
        },
        {
          "type": "table",
          "headers": ["Crit√®re", "Merge", "Rebase"],
          "rows": [
            ["Historique", "Pr√©serve l'historique complet (commits de fusion)", "Historique lin√©aire (r√©√©criture)"],
            ["Conflits", "R√©solus une seule fois", "Peuvent survenir √† chaque commit r√©appliqu√©"],
            ["Utilisation", "Fusion de branches publiques", "Nettoyage de branches locales avant fusion"]
          ]
        },
        {
          "type": "alert",
          "level": "danger",
          "text": "**Ne jamais rebaser une branche publique** (d√©j√† publi√©e sur le d√©p√¥t distant) car cela r√©√©crit l'historique."
        }
      ]
    },
    {
      "id": "conflits",
      "title": "Gestion des Conflits",
      "content": [
        {
          "type": "paragraph",
          "text": "Un **conflit** survient lorsque Git ne peut pas fusionner automatiquement les modifications de deux branches."
        },
        {
          "type": "subtitle",
          "text": "R√©solution Manuelle"
        },
        {
          "type": "code",
          "language": "text",
          "code": "<<<<<<< HEAD\nCode de la branche actuelle\n=======\nCode de la branche √† fusionner\n>>>>>>> feature-login"
        },
        {
          "type": "paragraph",
          "text": "Pour r√©soudre :"
        },
        {
          "type": "list",
          "items": [
            "1. Ouvrir le fichier en conflit",
            "2. Choisir quelle version garder (ou combiner les deux)",
            "3. Supprimer les marqueurs de conflit (`<<<<<<<`, `=======`, `>>>>>>>`)",
            "4. Ajouter le fichier r√©solu au staging : `git add <fichier>`",
            "5. Finaliser avec `git commit` (pour merge) ou `git rebase --continue` (pour rebase)"
          ]
        },
        {
          "type": "alert",
          "level": "info",
          "text": "**Conseil** : Utiliser un IDE (VS Code, IntelliJ) qui propose des outils visuels pour r√©soudre les conflits plus facilement."
        }
      ]
    },
    {
      "id": "depot-distant",
      "title": "D√©p√¥ts Distants (GitHub, GitLab)",
      "content": [
        {
          "type": "paragraph",
          "text": "Un **d√©p√¥t distant** (remote) permet de partager le code et de collaborer en √©quipe. Les plateformes les plus populaires sont **GitHub**, **GitLab** et **Bitbucket**."
        },
        {
          "type": "table",
          "headers": ["Commande", "R√¥le", "Exemple"],
          "rows": [
            ["git remote add <nom> <url>", "Connecte un d√©p√¥t distant", "git remote add origin https://github.com/user/repo.git"],
            ["git remote -v", "Liste les d√©p√¥ts distants connect√©s", "git remote -v"],
            ["git push <remote> <branche>", "Publie une branche sur le d√©p√¥t distant", "git push origin main"],
            ["git push -u origin <branche>", "Publie et configure le suivi de la branche", "git push -u origin main"],
            ["git pull", "R√©cup√®re et fusionne les modifications du distant", "git pull origin main"],
            ["git fetch", "R√©cup√®re les modifications sans les fusionner", "git fetch origin"],
            ["git clone <url>", "Clone un d√©p√¥t distant en local", "git clone https://github.com/user/repo.git"]
          ]
        },
        {
          "type": "subtitle",
          "text": "Workflow de Collaboration"
        },
        {
          "type": "list",
          "items": [
            "1. **Clone** : `git clone <url>` (premi√®re fois)",
            "2. **Pull** : `git pull` (r√©cup√©rer les modifications de l'√©quipe)",
            "3. **D√©veloppement** : Cr√©er une branche, coder, commiter",
            "4. **Push** : `git push` (publier ses modifications)",
            "5. **Pull Request** : Demander la fusion de sa branche (sur GitHub/GitLab)"
          ]
        }
      ]
    },
    {
      "id": "outils-avances",
      "title": "Outils Avanc√©s",
      "content": [
        {
          "type": "subtitle",
          "text": "Tags (Versions)"
        },
        {
          "type": "paragraph",
          "text": "Les **tags** permettent d'identifier des commits importants (versions livr√©es)."
        },
        {
          "type": "code",
          "language": "bash",
          "code": "# Cr√©er un tag\ngit tag v1.0.0\n\n# Publier les tags\ngit push --tags"
        },
        {
          "type": "subtitle",
          "text": "Stash (Remise)"
        },
        {
          "type": "paragraph",
          "text": "Le **stash** permet de \"mettre de c√¥t√©\" temporairement des modifications non commit√©es."
        },
        {
          "type": "code",
          "language": "bash",
          "code": "# Sauvegarder les modifications\ngit stash\n\n# Lister les stash\ngit stash list\n\n# R√©appliquer le dernier stash\ngit stash pop"
        },
        {
          "type": "subtitle",
          "text": ".gitignore"
        },
        {
          "type": "paragraph",
          "text": "Le fichier **.gitignore** permet d'ignorer certains fichiers/dossiers (d√©pendances, fichiers de build, etc.)."
        },
        {
          "type": "code",
          "language": "text",
          "code": "# Exemple .gitignore\nnode_modules/\n*.log\n.env\ndist/\nbuild/"
        }
      ]
    }
  ],
  "keyPoints": [
    "Git est un syst√®me de contr√¥le de version distribu√© (DVCS) permettant de travailler localement.",
    "Les commits enregistrent l'historique des modifications de mani√®re atomique.",
    "Les branches permettent de travailler sur des fonctionnalit√©s en parall√®le.",
    "Le merge fusionne deux branches, le rebase r√©√©crit l'historique de mani√®re lin√©aire.",
    "Les conflits surviennent quand les m√™mes lignes sont modifi√©es dans deux branches.",
    "Les d√©p√¥ts distants (GitHub, GitLab) permettent la collaboration en √©quipe.",
    "git pull = git fetch + git merge (r√©cup√®re et fusionne les modifications distantes)."
  ],
  "resources": [
    {
      "type": "doc",
      "title": "Documentation officielle Git",
      "url": "https://git-scm.com/doc"
    },
    {
      "type": "interactive",
      "title": "Learn Git Branching (interactif)",
      "url": "https://learngitbranching.js.org/"
    }
  ]
}
